<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <title th:text="${title}"/>
</head>
<body>
<header th:insert="~{blocks/header :: header}"></header>

<div class="container mt-5">
    <h1>Добавление студента</h1>

    <form id="addStudentForm" method="post" action="/students/add">

        <input type="text" name="lastName" placeholder="Фамилия" class="form-control mt-4" required>

        <input type="text" name="firstName" placeholder="Имя" class="form-control mt-2" required>

        <input type="text" name="middleName" placeholder="Отчество" class="form-control mt-2" required>

        <input type="number" name="course" placeholder="Курс" class="form-control mt-2" required>

        <select name="faculty" class="form-select mt-2" required>
            <option value="" selected disabled hidden>Факультет</option>
            <option value="Биологический">Биологический</option>
            <option value="Востоковедения">Востоковедения</option>
            <option value="Физкультурный">Физкультурный</option>
            <option value="Социальный">Социальный</option>
            <option value="Исторический">Исторический</option>
            <option value="ФИЯ">ФИЯ</option>
            <option value="ФИиИТ">ФИиИТ</option>
            <option value="Культуры">Культуры</option>
            <option value="Математический">Математический</option>
            <option value="Психологии и философии">Психологии и философии</option>
            <option value="Физический">Физический</option>
            <option value="Филологический">Филологический</option>
            <option value="Химический">Химический</option>
            <option value="Экологии">Экологии</option>
            <option value="Экономики">Экономики</option>
            <option value="Юридический">Юридический</option>
        </select>

        <select name="studyForm" class="form-select mt-2" required>
            <option value="" selected disabled hidden>Форма обучения</option>
            <option value="Бакалавриат">Бакалавриат</option>
            <option value="Магистратура">Магистратура</option>
        </select>

        <select name="scholarship" class="form-select mt-2" required>
            <option value="" selected disabled hidden>Стипендия</option>
            <option value="Социальная">Социальная</option>
            <option value="В повышенном размере">В повышенном размере</option>
        </select>

        <input type="number" name="orderNumber" placeholder="Номер приказа" class="form-control mt-2" required>

        <div class="row g-3 mt-1">
            <div class="col-md-3">
                <label for="orderDate" class="form-label">Дата приказа:</label>
                <input type="date" id="orderDate" name="orderDate" class="form-control" required>
            </div>

            <div class="col-md-3">
                <label for="issuanceEndDate" class="form-label">Дата окончания выдачи:</label>
                <input type="date" id="issuanceEndDate" name="issuanceEndDate" class="form-control" required>
            </div>

            <div class="col-md-3">
                <label for="foundationEndDate" class="form-label">Окончание срока основания:</label>
                <input type="date" id="foundationEndDate" name="foundationEndDate" class="form-control" required>
            </div>
        </div>

        <select name="foundationReason" class="form-select mt-4" required>
            <option value="" selected disabled hidden>Основание</option>
            <option value="УСЗН">УСЗН</option>
            <option value="Инвалидность">Инвалидность</option>
            <option value="Постановление">Постановление</option>
        </select>

        <button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="checkFormAndOpenModal()">
            Добавить студента
        </button>

        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Сохранение студента</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Вы уверены, что хотите сохранить студента в базу данных?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Нет</button>
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                    </div>
                </div>
            </div>
        </div>

<!--        <button type="submit" class="btn btn-success mt-3">Добавить студента</button>-->
    </form>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function checkFormAndOpenModal() {
        var form = document.getElementById("addStudentForm");
        if (form.checkValidity()) {
            $('#exampleModal').modal('show');
        } else {
            form.reportValidity();
        }
    }
</script>
</body>
</html>